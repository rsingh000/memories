{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac2018/Desktop/react/projects/memories_project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mac2018/Desktop/react/projects/memories_project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mac2018/Desktop/react/projects/memories_project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useRef}from'react';import{Typography,TextField,Button}from'@material-ui/core';import{useDispatch}from'react-redux';import useStyles from'./styles';import{commentPost}from\"../../actions/posts\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CommentSection=function CommentSection(_ref){var _user$result;var post=_ref.post;var classes=useStyles();var _useState=useState(post===null||post===void 0?void 0:post.comments),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),comment=_useState4[0],setComment=_useState4[1];var user=JSON.parse(localStorage.getItem('profile'));var dispatch=useDispatch();var commentsRef=useRef();var handleClick=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var finalComment,newComments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:finalComment=\"\".concat(user.result.name,\": \").concat(comment);_context.next=3;return dispatch(commentPost(finalComment,post._id));case 3:newComments=_context.sent;setComments(newComments);setComment('');commentsRef.current.scrollIntoView({behaviour:'smooth'});case 7:case\"end\":return _context.stop();}}},_callee);}));return function handleClick(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsOuterContainer,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.commentsInnerContainer,children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Comments\"}),comments.map(function(c,i){return/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,variant:\"subtitle1\",children:[/*#__PURE__*/_jsx(\"strong\",{children:c.split(': ')[0]}),c.split(':')[1]]},i);}),/*#__PURE__*/_jsx(\"div\",{ref:commentsRef})]}),(user===null||user===void 0?void 0:(_user$result=user.result)===null||_user$result===void 0?void 0:_user$result.name)&&/*#__PURE__*/_jsxs(\"div\",{style:{width:'70%'},children:[/*#__PURE__*/_jsx(Typography,{gutterBottom:true,variant:\"h6\",children:\"Write a Comment\"}),/*#__PURE__*/_jsx(TextField,{fullWidth:true,rows:4,variant:\"outlined\",label:\"Comment\",multiline:true,value:comment,onChange:function onChange(e){return setComment(e.target.value);}}),/*#__PURE__*/_jsx(Button,{style:{marginTop:'10px'},fullWidth:true,disabled:!comment,variant:\"contained\",color:\"primary\",onClick:handleClick,children:\"Comment\"})]})]})});};export default CommentSection;","map":{"version":3,"names":["React","useState","useRef","Typography","TextField","Button","useDispatch","useStyles","commentPost","CommentSection","post","classes","comments","setComments","comment","setComment","user","JSON","parse","localStorage","getItem","dispatch","commentsRef","handleClick","finalComment","result","name","_id","newComments","current","scrollIntoView","behaviour","commentsOuterContainer","commentsInnerContainer","map","c","i","split","width","e","target","value","marginTop"],"sources":["/Users/mac2018/Desktop/react/projects/memories_project/client/src/components/PostDetails/CommentSection.jsx"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { Typography, TextField, Button} from '@material-ui/core'\nimport { useDispatch } from 'react-redux';\n\nimport useStyles from './styles';\nimport  { commentPost } from \"../../actions/posts\";\n\nconst CommentSection = ({ post}) => {\n    const classes = useStyles();\n    const [ comments, setComments ] = useState(post?.comments);\n    const [ comment, setComment ] = useState('');\n    const user = JSON.parse(localStorage.getItem('profile'));\n    const dispatch = useDispatch();\n    const commentsRef = useRef();\n\n    const handleClick = async () => {\n        const finalComment = `${user.result.name}: ${comment}`;\n\n        const newComments = await dispatch(commentPost(finalComment, post._id));\n\n        setComments(newComments);\n        setComment('');\n\n        commentsRef.current.scrollIntoView({ behaviour: 'smooth' })\n    }\n\n    return (\n       <div>\n            <div className={classes.commentsOuterContainer}>\n                <div className={classes.commentsInnerContainer}>\n                    <Typography gutterBottom variant=\"h6\">Comments</Typography>\n                    {comments.map((c,i) => (\n                        <Typography key={i} gutterBottom variant=\"subtitle1\">\n                            <strong>{c.split(': ')[0]}</strong>\n                            {c.split(':')[1]}\n                        </Typography>\n                    ))}\n                    <div ref={commentsRef} />\n                </div>\n                { user?.result?.name && (\n                    <div style={{ width: '70%'}}>\n                        <Typography gutterBottom variant=\"h6\">Write a Comment</Typography>\n                        <TextField \n                            fullWidth\n                            rows={4}\n                            variant=\"outlined\"\n                            label=\"Comment\"\n                            multiline\n                            value={comment}\n                            onChange={(e) => setComment(e.target.value)}\n                        />\n                        <Button style={{ marginTop: '10px'}} fullWidth disabled={!comment} variant=\"contained\" color=\"primary\" onClick={handleClick}>\n                            Comment\n                        </Button>                    \n                    </div>\n                )}\n            </div>\n       </div>\n    )\n}\n\nexport default CommentSection;"],"mappings":"ycAAA,MAAOA,MAAP,EAAgBC,QAAhB,CAA0BC,MAA1B,KAAwC,OAAxC,CACA,OAASC,UAAT,CAAqBC,SAArB,CAAgCC,MAAhC,KAA6C,mBAA7C,CACA,OAASC,WAAT,KAA4B,aAA5B,CAEA,MAAOC,UAAP,KAAsB,UAAtB,CACA,OAAUC,WAAV,KAA6B,qBAA7B,C,wFAEA,GAAMC,eAAc,CAAG,QAAjBA,eAAiB,MAAa,qBAAVC,KAAU,MAAVA,IAAU,CAChC,GAAMC,QAAO,CAAGJ,SAAS,EAAzB,CACA,cAAkCN,QAAQ,CAACS,IAAD,SAACA,IAAD,iBAACA,IAAI,CAAEE,QAAP,CAA1C,wCAAQA,QAAR,eAAkBC,WAAlB,eACA,eAAgCZ,QAAQ,CAAC,EAAD,CAAxC,yCAAQa,OAAR,eAAiBC,UAAjB,eACA,GAAMC,KAAI,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAb,CACA,GAAMC,SAAQ,CAAGf,WAAW,EAA5B,CACA,GAAMgB,YAAW,CAAGpB,MAAM,EAA1B,CAEA,GAAMqB,YAAW,6FAAG,kKACVC,YADU,WACQR,IAAI,CAACS,MAAL,CAAYC,IADpB,cAC6BZ,OAD7B,wBAGUO,SAAQ,CAACb,WAAW,CAACgB,YAAD,CAAed,IAAI,CAACiB,GAApB,CAAZ,CAHlB,QAGVC,WAHU,eAKhBf,WAAW,CAACe,WAAD,CAAX,CACAb,UAAU,CAAC,EAAD,CAAV,CAEAO,WAAW,CAACO,OAAZ,CAAoBC,cAApB,CAAmC,CAAEC,SAAS,CAAE,QAAb,CAAnC,EARgB,sDAAH,kBAAXR,YAAW,2CAAjB,CAWA,mBACG,kCACK,aAAK,SAAS,CAAEZ,OAAO,CAACqB,sBAAxB,wBACI,aAAK,SAAS,CAAErB,OAAO,CAACsB,sBAAxB,wBACI,KAAC,UAAD,EAAY,YAAY,KAAxB,CAAyB,OAAO,CAAC,IAAjC,sBADJ,CAEKrB,QAAQ,CAACsB,GAAT,CAAa,SAACC,CAAD,CAAGC,CAAH,qBACV,MAAC,UAAD,EAAoB,YAAY,KAAhC,CAAiC,OAAO,CAAC,WAAzC,wBACI,wBAASD,CAAC,CAACE,KAAF,CAAQ,IAAR,EAAc,CAAd,CAAT,EADJ,CAEKF,CAAC,CAACE,KAAF,CAAQ,GAAR,EAAa,CAAb,CAFL,GAAiBD,CAAjB,CADU,EAAb,CAFL,cAQI,YAAK,GAAG,CAAEd,WAAV,EARJ,GADJ,CAWM,CAAAN,IAAI,OAAJ,EAAAA,IAAI,SAAJ,sBAAAA,IAAI,CAAES,MAAN,oDAAcC,IAAd,gBACE,aAAK,KAAK,CAAE,CAAEY,KAAK,CAAE,KAAT,CAAZ,wBACI,KAAC,UAAD,EAAY,YAAY,KAAxB,CAAyB,OAAO,CAAC,IAAjC,6BADJ,cAEI,KAAC,SAAD,EACI,SAAS,KADb,CAEI,IAAI,CAAE,CAFV,CAGI,OAAO,CAAC,UAHZ,CAII,KAAK,CAAC,SAJV,CAKI,SAAS,KALb,CAMI,KAAK,CAAExB,OANX,CAOI,QAAQ,CAAE,kBAACyB,CAAD,QAAOxB,WAAU,CAACwB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAjB,EAPd,EAFJ,cAWI,KAAC,MAAD,EAAQ,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAb,CAAf,CAAqC,SAAS,KAA9C,CAA+C,QAAQ,CAAE,CAAC5B,OAA1D,CAAmE,OAAO,CAAC,WAA3E,CAAuF,KAAK,CAAC,SAA7F,CAAuG,OAAO,CAAES,WAAhH,qBAXJ,GAZR,GADL,EADH,CAiCH,CApDD,CAsDA,cAAed,eAAf"},"metadata":{},"sourceType":"module"}