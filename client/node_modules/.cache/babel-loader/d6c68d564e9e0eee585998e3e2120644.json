{"ast":null,"code":"import _toConsumableArray from\"/Users/mac2018/Desktop/react/projects/memories_project/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/mac2018/Desktop/react/projects/memories_project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{Container,Grow,Grid,Paper,AppBar,Button,TextField}from'@material-ui/core';import{useDispatch}from'react-redux';import Posts from'../Posts/Posts';import Form from'../Form/Form';import{getPosts,getPostsBySearch}from'../../actions/posts';import Pagination from'../Pagination';import useStyles from'./styles';import{useHistory,useLocation}from'react-router-dom';import ChipInput from'material-ui-chip-input';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useQuery(){return new URLSearchParams(useLocation().search);}var Home=function Home(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var query=useQuery();var history=useHistory();var page=query.get('page')||1;var searchQuery=query.get('searchQuery');var classes=useStyles();var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];var searchPost=function searchPost(){if(search.trim()||tags){dispatch(getPostsBySearch({search:search,tags:tags.join(',')}));history.push(\"/posts/search?searchQuery=\".concat(search||'none',\"&tags=\").concat(tags.join(',')));}else{history.push('/');}};var handleKeyPress=function handleKeyPress(e){if(e.keyCode===13){searchPost();}};var handleAdd=function handleAdd(tag){setTags([].concat(_toConsumableArray(tags),[tag]));};var handleDelete=function handleDelete(tagToDelete){setTags(tags.filter(function(tag){return tag!==tagToDelete;}));};return/*#__PURE__*/_jsx(Grow,{in:true,children:/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",children:/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"space-between\",alignItems:\"stretch\",className:classes.gridContainer,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,md:9,children:/*#__PURE__*/_jsx(Posts,{setCurrentId:setCurrentId})}),/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:6,md:3,children:[/*#__PURE__*/_jsxs(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsx(TextField,{name:\"search\",variant:\"outlined\",label:\"Search Memories\",fullWidth:true,value:search,onKeyPress:handleKeyPress,onChange:function onChange(e){setSearch(e.target.value);}}),/*#__PURE__*/_jsx(ChipInput,{style:{margin:'10px 0'},value:tags,onAdd:handleAdd,onDelete:handleDelete,label:\"Search Tags\",variant:\"outlined\"}),/*#__PURE__*/_jsx(Button,{onClick:searchPost,className:classes.searchButton,variant:\"contained\",color:\"primary\",children:\"Search\"})]}),/*#__PURE__*/_jsx(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/_jsx(Paper,{className:classes.pagination,elevation:6,children:/*#__PURE__*/_jsx(Pagination,{page:page})})]})]})})});};export default Home;","map":{"version":3,"names":["React","useState","useEffect","Container","Grow","Grid","Paper","AppBar","Button","TextField","useDispatch","Posts","Form","getPosts","getPostsBySearch","Pagination","useStyles","useHistory","useLocation","ChipInput","useQuery","URLSearchParams","search","Home","currentId","setCurrentId","dispatch","query","history","page","get","searchQuery","classes","setSearch","tags","setTags","searchPost","trim","join","push","handleKeyPress","e","keyCode","handleAdd","tag","handleDelete","tagToDelete","filter","gridContainer","appBarSearch","target","value","margin","searchButton","length","pagination"],"sources":["/Users/mac2018/Desktop/react/projects/memories_project/client/src/components/Home/Home.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Grow, Grid, Paper, AppBar, Button, TextField } from '@material-ui/core';\nimport { useDispatch } from 'react-redux';\nimport Posts from '../Posts/Posts';\nimport Form from '../Form/Form';\nimport { getPosts, getPostsBySearch } from '../../actions/posts';\nimport Pagination from '../Pagination';\nimport useStyles from './styles';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport ChipInput from 'material-ui-chip-input';\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search);\n}\n\nconst Home = () => {\n\n    const [currentId, setCurrentId] = useState(null);\n    const dispatch = useDispatch();\n    const query = useQuery();\n    const history = useHistory();\n    const page = query.get('page') || 1;\n    const searchQuery = query.get('searchQuery');\n    const classes = useStyles();\n    const [search, setSearch] = useState('');\n    const [tags, setTags] = useState([]);\n\n    const searchPost = () => {\n        if(search.trim() || tags) {\n            dispatch(getPostsBySearch({ search, tags: tags.join(',') }));\n            history.push(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`)\n        } else {\n            history.push('/');\n        }\n    }\n\n    const handleKeyPress = (e) => {\n        if(e.keyCode === 13) {\n            searchPost();\n        }\n    }\n\n    const handleAdd = (tag) => {\n        setTags([...tags, tag]);\n    }\n\n    const handleDelete = (tagToDelete) => {\n        setTags(tags.filter((tag) => tag !== tagToDelete));\n    }\n\n  return (\n    <Grow in>\n        <Container maxWidth=\"xl\">\n            <Grid container justifyContent=\"space-between\" alignItems=\"stretch\" className={classes.gridContainer} spacing={3}>\n                <Grid item xs={12} sm={6} md={9}>\n                    <Posts setCurrentId={setCurrentId}/>\n                </Grid>\n                <Grid item xs={12} sm={6} md={3}>\n                    <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\" >\n                        <TextField name=\"search\" variant=\"outlined\" label=\"Search Memories\" fullWidth value={search}\n                            onKeyPress={handleKeyPress}\n                            onChange={(e) => {setSearch(e.target.value)}}\n                        />\n                        <ChipInput\n                            style={{ margin: '10px 0'}}\n                            value={tags}\n                            onAdd={handleAdd}\n                            onDelete={handleDelete}\n                            label=\"Search Tags\"\n                            variant=\"outlined\"\n                        />\n                        <Button onClick={searchPost} className={classes.searchButton} variant=\"contained\" color=\"primary\">Search</Button>\n                    </AppBar>\n                    <Form currentId={currentId} setCurrentId={setCurrentId}/>\n                    { (!searchQuery && !tags.length) && (\n                        <Paper className={classes.pagination} elevation={6}>\n                            <Pagination page={page}/>\n                        </Paper>\n                    )}\n                </Grid>\n            </Grid>\n        </Container>\n    </Grow>\n  )\n}\n\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module"}